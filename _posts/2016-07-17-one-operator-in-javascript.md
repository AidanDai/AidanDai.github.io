---
layout: post
title: "【总结】javascript 中的 %"
date: 2016-07-17 16:06
tags: operators
category: javascript
author: Aidan
---

由于取余和取模的数学运算是不一样的，但通常情况下取模运算(mod)和求余(rem)运算都被混为一谈，因为在大多数的编程语言里，都用'%'符号表示取模或者求余运算。在这里要提醒大家要十分注意当前环境下'%'运算符的具体意义，因为在有负数存在的情况下，两者的结果是不一样的。那么 javascript 的 % 到底是做什么运算的呢？今天刚好有空研究一下 

# 1 取余和取模运算

对于整型数a，b来说，取模运算或者求余运算的方法都是：

>1 求整数商： 		c = a/b

>2 计算模或者余数： r = a - c*b

求模运算和求余运算在第一步不同: **`取余运算在取c的值时，向0方向舍入(fix()函数)；而取模运算在计算c的值时，向负无穷方向舍入(floor()函数)`**。

因此，当a和b符号一致时，求模运算和求余运算所得的c的值一致，因此结果一致。但是当符号不一致的时候，结果不一样。

例如：计算-7 mod 4

那么：a = -7；b = 4；

第一步：求整数商c，如求余c = -1（向0方向舍入），进行求模运算c = -2（向负无穷方向舍入）；

第二步：计算余数和模的公式相同，但因c的值不同，求模时r = 1，求余时r = -3。

归纳：

- 当a和b符号一致时，求模运算和求余运算所得的c的值一致，因此结果一致。
- 当符号不一致时，结果不一样。求余运算结果的符号和a一致，求模运算结果的符号和b一致。

# 2 javascript 中的 %

```
console.log(-5 % 2); // -1
// a = -5, b = 2
// c = -2（余） 或 c = -3（模）
// r = a - c*b = -5 - (-2 * 2) = -1 或 r = a - c*b = -5 - (-3 * 2) = 1
// 结果显然是 取余运算

console.log(5 % -2); // 1
// a = 5, b = -2
// c = -2（余） 或 c = -3（模）
// r = a - c*b = 5 - (-2 * -2) = 1 或 r = a - c*b = 5 - (-3 * -2) = -1
// 结果显然是 取余运算


console.log(-5 % -2); // -1
// a = -5, b = -2
// c = 2（余） 或 c = 2（模）
// r = a - c*b = -5 - (2 * -2) = -1 或 r = a - c*b = -5 - (2 * -2) = -1
// 取余和取模结果相同

console.log(5 % 2); // 1
// a = 5, b = 2
// c = 2（余） 或 c = 2（模）
// r = a - c*b = 5 - (2 * 2) = 1 或 r = a - c*b = 5 - (2 * 2) = 1
// 取余和取模结果相同

// 至于小数任然遵循取余运算规则
console.log(-5.4 % 2.3);
console.log(5.4 % -2.3);

console.log(-5.4 % -2.3);
console.log(5.4 % 2.3);

// -0.8000000000000007
// 0.8000000000000007
// -0.8000000000000007
// 0.8000000000000007
```

javascript 中的 % 显然是 取余运算。




