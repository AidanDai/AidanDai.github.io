<!doctype html><html><head><meta charset=UTF-8><title>Optimize image guide for web - By 文桥</title><link rel=stylesheet href=//cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css><link rel=stylesheet href=//cdn.staticfile.org/prism/1.15.0/themes/prism.min.css><link rel=stylesheet href=//cdn.staticfile.org/KaTeX/0.10.0-rc.1/katex.min.css><link rel=stylesheet href=//cdn.staticfile.org/prism/1.15.0/themes/prism-dark.min.css><link href=./css/chunk-vendors.7715a65a.css rel=stylesheet></head><body><div><article id=webslides><section slide class=slide><div class=wrap wrap=true><h1>web 图片优化指南</h1><div class=user>文桥　2017/08/28</div></div></section><section slide class=slide><div class=wrap wrap=true><h1>1. 先介绍几个图片的基础知识</h1><hr><hr><ul><li><a href="/#slide=3" target=_blank>1.1 图像分类</a></li><li><a href="/#slide=4" target=_blank>1.2 图像基本数据结构</a></li><li><a href="/#slide=5" target=_blank>1.4 色彩空间(color space)</a></li><li><a href="/#slide=6" target=_blank>1.5 色彩模型(color model)</a></li><li><a href="/#slide=7" target=_blank>1.6 颜色深度(color depth)</a></li><li><a href="/#slide=8" target=_blank>1.7 图像模式(color modes)</a></li></ul><hr><hr></div></section><section slide class=slide><div class=wrap wrap=true><h2>1.1 图像分类</h2><h3><a href=https://en.wikipedia.org/wiki/Raster_graphics title=位图（Bitmap），又称栅格图或点阵图，是使用像素阵列(Pixel-array/Dot-matrix點陣)来表示的图像。 target=_blank>位图（Raster graphics）</a></h3><blockquote><p>In computer graphics, a raster graphics or bitmap image is a dot matrix data structure that represents a generally rectangular grid of pixels (points of color), viewable via a monitor, paper, or other display medium. Raster images are stored in image files with varying formats.</p></blockquote><h3><a href=https://en.wikipedia.org/wiki/Vector_graphics title=矢量图形是计算机图形学中用点、直线或者多边形等基于数学方程的几何图元表示图像。 target=_blank>矢量图（Vector graphics）</a></h3><blockquote><p>Vector graphics are computer graphics images that are defined in terms of 2D points, which are connected by lines and curves to form polygons and other shapes. Each of these points has a definite position on the x- and y-axis of the work plane and determines the direction of the path; further, each path may have various properties including values for stroke color, shape, curve, thickness, and fill. Vector graphics are commonly found today in the SVG, EPS and PDF graphic file formats and are intrinsically different from the more common raster graphics file formats of JPEG, PNG, APNG, GIF, and MPEG4.</p></blockquote></div></section><section slide class=slide><div class=wrap wrap=true><h2>1.2 图像基本数据结构</h2><p><img src=./img/000.65d12df6.png alt=图像数据结构 style="display: block; margin: 0 auto;"></p></div></section><section slide class=slide><div class=wrap wrap=true><h2>1.3 <a href=https://en.wikipedia.org/wiki/Color_space title="色彩空间是对色彩的组织方式。借助色彩空间和针对物理设备的测试，可以得到色彩的固定模拟和数字表示。色彩空间可以只通过任意挑选一些颜色来定义，比如像彩通系统就只是把一组特定的颜色作为样本，然后给每个颜色定义名字和代码；也可以是基于严谨的数学定义，比如 Adobe RGB、sRGB。" target=_blank>色彩空间(Color space)</a></h2><blockquote><p>A <strong>color space</strong> is a specific organization of colors.</p></blockquote><p><img src=./img/001.fcad99ed.svg alt="color space" style="display: block; margin: 0 auto; width: 500px; height: 500px;"></p></div></section><section slide class=slide><div class=wrap wrap=true><h2>1.5 <a href=https://en.wikipedia.org/wiki/Color_model title=色彩模型是一种抽象数学模型，通过一组数字来描述颜色（例如RGB使用三元组、CMYK使用四元组）。如果一个色彩模型与绝对色彩空间没有映射关系，那么它多少都是与特定应用要求几乎没有关系的任意色彩系统。 target=_blank>色彩模型(Color model)</a></h2><blockquote><p>A <strong>color model</strong> is an abstract mathematical model describing the way colors can be represented as tuples of numbers, typically as three or four values or color components.</p></blockquote><ul><li><a href=https://en.wikipedia.org/wiki/RGB_color_model title="三原色光模式（RGB color model），又称RGB颜色模型或红绿蓝颜色模型，是一种加色模型，将红（Red）、绿（Green）、蓝（Blue）三原色的色光以不同的比例相加，以产生多种多样的色光。" target=_blank>RGB</a></li><li><a href=https://en.wikipedia.org/wiki/YUV title="YUV，是一種顏色編碼方法。常使用在各個影像處理元件中。 YUV在對照片或影片編碼時，考慮到人類的感知能力，允許降低色度的頻寬。" target=_blank>YUV - luminance, Chrominance, Chroma</a></li><li><a href=https://en.wikipedia.org/wiki/CMYK_color_model title="印刷四分色模式（CMYK）是彩色印刷时采用的一种套色模式，利用色料的三原色混色原理，加上黑色油墨，共計四种颜色混合疊加，形成所謂「全彩印刷」。四种标准颜色是：Cyan(青色)，Magenta(洋红色)，Yellow(黃色), Key Color(定位套版色)" target=_blank>CMYK(CMY) - cyan, magenta, yellow, key</a></li><li><a href=https://en.wikipedia.org/wiki/HSL_and_HSV title="HSL和HSV都是一种将RGB色彩模型中的点在圆柱坐标系中的表示法。这两种表示法试图做到比基于笛卡尔坐标系的几何结构RGB更加直观。HSL即色相、饱和度、亮度（Hue, Saturation, Lightness）。HSV即色相、饱和度、明度（Hue, Saturation, Value），又称HSB（Brightness）。" target=_blank>HSL (hue, saturation, lightness) and HSV (hue, saturation, value)</a><br><br><br><br></li></ul><p>注：（1）色相（H）是色彩的基本属性，就是平常所说的颜色名称，如红色、黄色等。（2）饱和度（S）是指色彩的纯度，越高色彩越纯，低则逐渐变灰，取0-100%的数值。（3）明度（V），亮度（L），取0-100%。</p></div></section><section slide class=slide><div class=wrap wrap=true><h2>1.5 <a href=https://en.wikipedia.org/wiki/Color_depth target=_blank>颜色深度(color depth)</a></h2><br><br><br><br><blockquote><p><strong>Color depth</strong> or <strong>colour depth</strong>, also known as <strong>bit depth</strong>, is either the number of bits used to indicate the color of a single pixel, in a bitmapped image or video framebuffer, or the number of bits used for each color component of a single pixel.</p></blockquote><blockquote><p>位深度用于指定图像中的每个像素可以使用的颜色信息数量。每个像素使用的信息位数越多，可用的颜色就越多，颜色表现就更逼真。例如，位深度为 1 的图像的像素有两个可能的值：黑色和白色。位深度为 8 的图像有 2<sup>8</sup>（即 256）个可能的值。位深度为 8 的灰度模式图像有 256 个可能的灰色值。</p></blockquote><p><br>举个栗子：RGB 图像由三个颜色通道组成。8 位/像素的 RGB 图像中的每个通道有 256 个可能的值，这意味着该图像有 1600（256<sup>3</sup>） 万个以上可能的颜色值。有时将带有 8 位/通道 (bpc) 的 RGB 图像称作 24 位图像（8 位 x 3 通道 = 24 位数据/像素）。</p></div></section><section slide class=slide><div class=wrap wrap=true><h2>1.6 <a href=https://helpx.adobe.com/cn/photoshop/using/color-modes.html target=_blank>图像模式(color modes)</a></h2><blockquote><p>颜色模式或图像模式决定了如何基于颜色模式中的通道数量来组合颜色。不同的颜色模式会导致不同级别的颜色细节和不同的文件大小。</p></blockquote><ol><li><strong><a href=https://helpx.adobe.com/cn/photoshop/using/color-modes.html#rgb_color_mode target=_blank>RGB 颜色模式</a>（数百万种颜色）</strong>：Photoshop RGB 颜色模式使用 RGB 模型，并为每个像素分配一个强度值。在 8 位/通道的图像中，彩色图像中的每个 RGB（红色、绿色、蓝色）分量的强度值为 0（黑色）到 255（白色）。</li><li><strong><a href=https://helpx.adobe.com/cn/photoshop/using/color-modes.html#cmyk_color_mode target=_blank>CMYK 颜色模式</a>（四种印刷色）</strong>：在 CMYK 模式下，可以为每个像素的每种印刷油墨指定一个百分比值。为最亮（高光）颜色指定的印刷油墨颜色百分比较低；而为较暗（阴影）颜色指定的百分比较高。</li><li><strong><a href=https://helpx.adobe.com/cn/photoshop/using/color-modes.html#indexed_color_mode target=_blank>索引颜色模式</a>（256 种颜色）</strong>：索引颜色模式可生成最多 256 种颜色的 8 位图像文件。当转换为索引颜色时，Photoshop 将构建一个颜色查找表 (CLUT)，用以存放并索引图像中的颜色。如果原图像中的某种颜色没有出现在该表中，则程序将选取最接近的一种，或使用仿色以现有颜色来模拟该颜色。</li><li><strong><a href=https://helpx.adobe.com/cn/photoshop/using/color-modes.html#grayscale_mode target=_blank>灰度模式</a>（8位，256 级灰度）</strong>：灰度模式在图像中使用不同的灰度级。在 8 位图像中，最多有 256 级灰度。灰度图像中的每个像素都有一个 0（黑色）到 255（白色）之间的亮度值。</li><li><strong><a href=https://helpx.adobe.com/cn/photoshop/using/color-modes.html#bitmap_mode target=_blank>位图模式</a>（1位，两种颜色）</strong>：位图模式使用两种颜色值（黑色或白色）之一表示图像中的像素。位图模式下的图像被称为位映射 1 位图像，因为其位深度为 1。</li><li><strong><a href=https://helpx.adobe.com/cn/photoshop/using/color-modes.html#lab_color_mode target=_blank>Lab 颜色模式</a></strong>：CIE L<em>a</em>b* 颜色模型 (Lab) 基于人对颜色的感觉。Lab 中的数值描述正常视力的人能够看到的所有颜色。因为 Lab 描述的是颜色的显示方式，而不是设备（如显示器、桌面打印机或数码相机）生成颜色所需的特定色料的数量，所以 Lab 被视为与设备无关的颜色模型。色彩管理系统使用 Lab 作为色标，将颜色从一个色彩空间转换到另一个色彩空间。</li><li><strong><a href=https://helpx.adobe.com/cn/photoshop/using/color-modes.html#duotone_mode target=_blank>双色调模式</a></strong>：该模式通过一至四种自定油墨创建单色调、双色调（两种颜色）、三色调（三种颜色）和四色调（四种颜色）的灰度图像。</li><li><strong><a href=https://helpx.adobe.com/cn/photoshop/using/color-modes.html#multichannel_mode target=_blank>多通道模式</a></strong>：多通道模式图像在每个通道中包含 256 个灰阶，对于特殊打印很有用。</li></ol><hr><p>注：多数图像模式都可以指定位通道数，通常为：8位/通道、16位/通道或32位/通道</p></div></section><section slide class=slide><div class=wrap wrap=true><h2>1.6 图像模式</h2><p><img src=./img/002.c538ebe1.jpg alt="color modes example" style="display: block; margin: 0 auto; width: 1046px; height: 620px;"></p></div></section><section slide class=slide><div class=wrap wrap=true><h1>2. web 常见图片格式</h1><table><thead><tr><th>扩展名</th><th>文档类型</th><th>MIME Type</th><th>是否压缩编码</th></tr></thead><tbody><tr><td><a href=https://en.wikipedia.org/wiki/BMP_file_format target=_blank>.bmp</a></td><td>Windows OS/2 Bitmap Graphics</td><td>image/bmp</td><td>无压缩</td></tr><tr><td><a href=https://en.wikipedia.org/wiki/GIF target=_blank>.gif</a></td><td>Graphics Interchange Format (GIF)</td><td>image/gif</td><td>无损压缩</td></tr><tr><td><a href=https://en.wikipedia.org/wiki/ICO_(file_format) target=_blank>.ico</a></td><td>Icon format</td><td>image/x-icon</td><td></td></tr><tr><td><a href=https://en.wikipedia.org/wiki/JPEG target=_blank>.jpeg<br>.jpg</a></td><td>JPEG images</td><td>image/jpeg</td><td>有损压缩</td></tr><tr><td><a href=https://en.wikipedia.org/wiki/Portable_Network_Graphics target=_blank>.png</a></td><td>Portable Network Graphics</td><td>image/png</td><td>无损压缩</td></tr><tr><td><a href=https://en.wikipedia.org/wiki/Scalable_Vector_Graphics target=_blank>.svg</a></td><td>Scalable Vector Graphics (SVG)</td><td>image/svg+xml</td><td>无损压缩</td></tr><tr><td><a href=https://en.wikipedia.org/wiki/TIFF target=_blank>.tif<br>.tiff</a></td><td>Tagged Image File Format (TIFF)</td><td>image/tiff</td><td>无损压缩</td></tr><tr><td><a href=https://developers.google.com/speed/webp/ target=_blank>.webp</a></td><td>WEBP image</td><td>image/webp</td><td>有损压缩</td></tr></tbody></table></div></section><section slide class=slide><div class=wrap wrap=true><h2>2.2 <a href=https://en.wikipedia.org/wiki/GIF title="Graphics Interchange Format" target=_blank>gif</a> 格式图片简介</h2><p>The format supports up to 8 bits per pixel for each image, allowing a single image to reference its own palette of up to 256 different colors chosen from the 24-bit RGB color space. It also supports animations and allows a separate palette of up to 256 colors for each frame. These palette limitations make GIF less suitable for reproducing color photographs and other images with color gradients, but it is well-suited for simpler images such as graphics or logos with solid areas of color.</p><div style="display: block; text-align: center;"><img src=data:image/png;base64,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 alt="gif 数据结构" style="padding-right: 100px;"> <img src=./img/016.c12e49fb.png alt="gif 数据结构" style="padding-left: 100px;"></div><ul><li><a href=https://cloud.tencent.com/developer/article/1155421 target=_blank>https:://cloud.tencent.com/developer/article/1155421</a></li><li><a href=https://blog.csdn.net/wzy198852/article/details/17266507 target=_blank>https:://blog.csdn.net/wzy198852/article/details/17266507</a></li></ul></div></section><section slide class=slide><div class=wrap wrap=true><h2>2.3 jpeg 格式图片简介</h2><p><img src=./img/004.c59a6cc3.jpg alt="jpg 数据结构" style="display: block; margin: 0 auto;"></p></div></section><section slide class=slide><div class=wrap wrap=true><h3>2.3.1 jpeg 格式图片压缩原理简介</h3><p><br><br><br><br><img src=./img/017.fe7c73ac.png alt="jpeg 格式图片压缩原理简介" style="display: block; margin: 0 auto;"></p></div></section><section slide class=slide><div class=wrap wrap=true><h4>2.3.1.1 Divided into 8*8 blocks</h4><p><img src=./img/005.2213a62b.jpg alt="Divided into 8*8 blocks(1)" style="display: block; margin: 0 auto;," title=分块></p></div></section><section slide class=slide><div class=wrap wrap=true><h4>2.3.1.1 Divided into 8*8 blocks</h4><p><img src=./img/006.da967c10.jpg alt="Divided into 8*8 blocks(2)" style="display: block; margin: 0 auto;," title=分块></p></div></section><section slide class=slide><div class=wrap wrap=true><h4>2.3.1.2 Convert RGB to YCbCr</h4><p><img src=./img/007.dfaef1d9.jpg alt="Convert RGB to YCbCr(1)" style="display: block; margin: 0 auto;," title=色彩空间转换></p><ul><li><a href=https://en.wikipedia.org/wiki/YCbCr#ITU-R_BT.601_conversion target=_blank>https:://en.wikipedia.org/wiki/YCbCr#ITU-R_BT.601_conversion</a></li></ul></div></section><section slide class=slide><div class=wrap wrap=true><h4>2.3.1.2 Convert RGB to YCbCr</h4><p><img src=./img/008.732ac5d9.jpg alt="Convert RGB to YCbCr(2)" style="display: block; margin: 0 auto;," title=色彩空间转换></p></div></section><section slide class=slide><div class=wrap wrap=true><h4>2.3.1.3 Downsampling(optional)</h4><p><img src=./img/009.b0c2fa2e.jpg alt=Downsampling(optional) style="display: block; margin: 0 auto;," title=采样></p></div></section><section slide class=slide><div class=wrap wrap=true><h4>2.3.1.4 Applay DCT[Discrete Cosine Transformation]</h4><p><img src=./img/010.49179371.jpg alt="Applay DCTDiscrete Cosine Transformation" style="display: block; margin: 0 auto;," title=离散余弦变换></p></div></section><section slide class=slide><div class=wrap wrap=true><h4>2.3.1.4 Applay DCT[Discrete Cosine Transformation]</h4><p><img src=./img/011.a735fd67.jpg alt="Applay DCTDiscrete Cosine Transformation" style="display: block; margin: 0 auto;," title=离散余弦变换></p></div></section><section slide class=slide><div class=wrap wrap=true><h4>2.3.1.5 Quantization</h4><p><img src=./img/011.a735fd67.jpg alt=Quantization style="display: block; margin: 0 auto;," title=数据量子化></p></div></section><section slide class=slide><div class=wrap wrap=true><h4>2.3.1.5 Quantization [Quality Factor]</h4><p><img src=./img/012.c89ba536.jpg alt="Quantization [Quality Factor]" style="display: block; margin: 0 auto;," title=数据量子化></p></div></section><section slide class=slide><div class=wrap wrap=true><h4>2.3.1.5 Quantization</h4><p><img src=./img/013.bfb04ca3.jpg alt=Quantization style="display: block; margin: 0 auto;," title=数据量子化></p></div></section><section slide class=slide><div class=wrap wrap=true><h4>2.3.1.6 Zigzag reordering &amp; RLE</h4><p><img src=./img/014.64f83c66.jpg alt="Zigzag reordering &amp; RLE" style="display: block; margin: 0 auto;," title="差值编码和Zig-zag扫描 &amp; 游程长度编码(Run-Length Encoding, RLE)"></p></div></section><section slide class=slide><div class=wrap wrap=true><h4>2.3.1.7 Huffman encoding</h4><p><img src=./img/015.604f1bae.jpg alt=" Huffman encoding" style="display: block; margin: 0 auto;," title=Huffman编码></p></div></section><section slide class=slide><div class=wrap wrap=true><h2>2.4 png 格式图片简介</h2><table><thead><tr><th>PNG文件标志</th><th>PNG数据块</th><th>.......</th><th>PNG数据块</th></tr></thead><tbody></tbody></table><table><thead><tr><th>数据块符号</th><th>数据块名称</th><th>多数据块</th><th>可选否</th><th>位置限制</th></tr></thead><tbody><tr><td>IHDR</td><td>文件头数据块</td><td>否</td><td>否</td><td>第一块</td></tr><tr><td>cHRM</td><td>基色和白色点数据块</td><td>否</td><td>是</td><td>在PLTE和IDAT之前</td></tr><tr><td>gAMA</td><td>图像γ数据块</td><td>否</td><td>是</td><td>在PLTE和IDAT之前</td></tr><tr><td>sBIT</td><td>样本有效位数据块</td><td>否</td><td>是</td><td>在PLTE和IDAT之前</td></tr><tr><td>PLTE</td><td>调色板数据块</td><td>否</td><td>是</td><td>在IDAT之前</td></tr></tbody></table><ul><li><a href=https://blog.csdn.net/bisword/article/details/2777121 target=_blank>https:://blog.csdn.net/bisword/article/details/2777121</a></li></ul><p>注：PNG定义了两种类型的数据块，一种是关键数据块(critical chunk)，这是标准的数据块，另一种叫做辅助数据块(ancillary chunks)，这是可选的数据块。</p></div></section><section slide class=slide><div class=wrap wrap=true><table><thead><tr><th>数据块符号</th><th>数据块名称</th><th>多数据块</th><th>可选否</th><th>位置限制</th></tr></thead><tbody><tr><td>bKGD</td><td>背景颜色数据块</td><td>否</td><td>是</td><td>在PLTE之后IDAT之前</td></tr><tr><td>hIST</td><td>图像直方图数据块</td><td>否</td><td>是</td><td>在PLTE之后IDAT之前</td></tr><tr><td>tRNS</td><td>图像透明数据块</td><td>否</td><td>是</td><td>在PLTE之后IDAT之前</td></tr><tr><td>oFFs</td><td>(专用公共数据块)</td><td>否</td><td>是</td><td>在IDAT之前</td></tr><tr><td>pHYs</td><td>物理像素尺寸数据块</td><td>否</td><td>是</td><td>在IDAT之前</td></tr><tr><td>sCAL</td><td>(专用公共数据块)</td><td>否</td><td>是</td><td>在IDAT之前</td></tr><tr><td>IDAT</td><td>图像数据块</td><td>是</td><td>否</td><td>与其他IDAT连续</td></tr><tr><td>tIME</td><td>图像最后修改时间数据块</td><td>否</td><td>是</td><td>无限制</td></tr></tbody></table></div></section><section slide class=slide><div class=wrap wrap=true><table><thead><tr><th>数据块符号</th><th>数据块名称</th><th>多数据块</th><th>可选否</th><th>位置限制</th></tr></thead><tbody><tr><td>tEXt</td><td>文本信息数据块</td><td>是</td><td>是</td><td>无限制</td></tr><tr><td>zTXt</td><td>压缩文本数据块</td><td>是</td><td>是</td><td>无限制</td></tr><tr><td>fRAc</td><td>(专用公共数据块)</td><td>是</td><td>是</td><td>无限制</td></tr><tr><td>gIFg</td><td>(专用公共数据块)</td><td>是</td><td>是</td><td>无限制</td></tr><tr><td>gIFt</td><td>(专用公共数据块)</td><td>是</td><td>是</td><td>无限制</td></tr><tr><td>gIFx</td><td>(专用公共数据块)</td><td>是</td><td>是</td><td>无限制</td></tr><tr><td>IEND</td><td>图像结束数据</td><td>否</td><td>否</td><td>最后一个数据块</td></tr></tbody></table></div></section><section slide class=slide><div class=wrap wrap=true><h3>2.4.1 png 格式图片压缩原理简介</h3><p><br><br><br><br><img src=./img/018.1e024cb4.webp alt="png 格式图片压缩原理简介" style="display: block; margin: 0 auto;"></p></div></section><section slide class=slide><div class=wrap wrap=true><h3>2.4.1.1 Prediction</h3><br><br><br><br><blockquote><p>在这一阶段，我们每次会处理图片中一行的数据，首先通过Filter阶段处理这一行当中每一个的像素点中每条通道的值，也就是我们常说的ARBG。它交由差分处理器来重新计算该通道的值。差分处理会根据这个像素点上通道和之前或者之上像素点对应通道值之间的差异，进行差分编码，也就是说，如果原本相邻像素点之间通道的值之间很接近，那么我们就会获得很多的1,0,-1这种很小的值。</p></blockquote><pre class=language-textile><code class=language-textile><span class="token phrase">[2,3,4,5,6,7,8] can become [2,1,1,1,1,1,1], where</span>

<span class="token phrase">[2, 3–2=1, 4–3=1, 5–4=1, 6–5=1, 7–6=1, 8–7=1]
</span></code></pre><p>注：差分编码器比较的是像素点之间对应通道的值，而并不是整个像素点。</p></div></section><section slide class=slide><div class=wrap wrap=true><h3>2.4.1.1 Compression</h3><br><br><br><br><blockquote><p>在Prediction处理完毕之后，再将这一转换的结果输出给Deflate，Deflate执行真正的压缩操作，它会通过LZ77和Huffman对图像进行编码，最后将处理之后的结果保存。</p></blockquote><div style="display: block; text-align: center;" title="Deflate 每一行的匹配情况：前面我们分析过，整个处理过程是按行来处理的。而在处理每一行的数据时，Deflate把处理的符号数限制为3 ~ 258，也就是说，最大的压缩率为1032:1，当出现符号数小于3个时，那么就有可能出现无法匹配的情况，因此，对于图片宽度的改变将有可能影响最终压缩的效果。"><img src=./img/019.3da8f3f4.jpg alt="Compression 1" style="padding-right: 100px;"> <img src=./img/020.1e4e89dc.jpg alt="Compression 2" style="padding-left: 100px;"></div></div></section><section slide class=slide><div class=wrap wrap=true><h1>3. 那么优化图片我们到底能做什么</h1><br><br><br><br><h2>3.1 选择正确的图像格式</h2><p><img src=./img/021.23cc862a.png alt=选择正确的图像格式 style="display: block; margin: 0 auto;"></p></div></section><section slide class=slide><div class=wrap wrap=true><blockquote><ol><li>您是否需要动画？如果需要，GIF 是唯一的通用选择。<ul><li>GIF 将调色板限制为最多 256 色，这对大多数图像而言都不是好的选择。 况且，对于调色板较小的图像，PNG-8 的压缩效果更佳。 因此，只有需要动画时，GIF 才是正确的选择。</li></ul></li><li>您是否需要使用最高分辨率保留精细的细节？请使用 PNG。<ul><li>除了选择调色板的大小外，PNG 不采用任何有损压缩算法。 因此，它能生成最高质量的图像，但代价是文件大小要比其他格式大得多。 请谨慎使用。</li><li>如果图像资产包含由几何形状组成的图像，请务必考虑将其转换成矢量 (SVG) 格式！</li><li>如果图像资产包含文本，请停下来再做考虑。 图像中的文本无法选择、搜索或“缩放”。 如果您需要表现一种自定义外观（出于品牌推广或其他原因），请改用网页字体。</li></ul></li><li>您是否要优化照片、屏幕截图或类似的图像资产？请使用 JPEG。<ul><li>JPEG 组合使用有损和无损优化来减小图像资产的文件大小。 请尝试几种 JPEG 质量级别，为您的资产找到最佳的质量 与文件大小平衡点。</li></ul></li></ol></blockquote></div></section><section slide class=slide><div class=wrap wrap=true><h2>3.2 合理的压缩图片</h2><ul><li>避免使用有损编解码器重新压缩图像</li><li>减少不必要的图像解码及调整大小的成本</li></ul><h2>3.3 使用 CDN</h2></div></section><section slide class=slide><div class=wrap wrap=true><h2>3.4 使用内容类型协商</h2><pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>picture</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/path/to/image.webp<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image/webp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/path/to/image.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>picture</span><span class="token punctuation">></span></span>
</code></pre><p>注：最好使用有优化图像功能的 CDN，自动返回最小尺寸的图片类型</p><h2>3.5 使用 srcset 提供 HiDPI 图像</h2><pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>photo.png<span class="token punctuation">"</span></span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>photo@2x.png 2x<span class="token punctuation">"</span></span> <span class="token attr-name">...</span><span class="token punctuation">></span></span>
</code></pre><pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>picture</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>(min-width: 800px)<span class="token punctuation">"</span></span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>head.jpg, head-2x.jpg 2x<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>(min-width: 450px)<span class="token punctuation">"</span></span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>head-small.jpg, head-small-2x.jpg 2x<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>head-fb.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>head-fb-2x.jpg 2x<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>a head carved out of wood<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>picture</span><span class="token punctuation">></span></span>
</code></pre><p>注：最好使用有优化图像功能的 CDN，自动返回最合适 HiDPI 的图片</p></div></section><section slide class=slide><div class=wrap wrap=true><h2>3.6 延迟加载非关键图像</h2><ul><li><a href=https://github.com/aFarkas/lazysizes target=_blank>https:://github.com/aFarkas/lazysizes</a></li></ul><h2>3.7 缓存图像资产</h2><h2>3.8 预加载关键图像资产</h2><h2>3.9 测试图片优化的效果</h2><ul><li><a href=https://webspeedtest.cloudinary.com/ target=_blank>https:://webspeedtest.cloudinary.com/</a></li></ul><p>注：只能检测 load 事件之前加载完成的图片。</p></div></section><section slide class=slide><div class=wrap wrap=true><h2>3.10 Web performance budgets for images</h2><p><br><br><img src=./img/022.743c1c7a.jpg alt="Web performance budgets for images" style="display: block; margin: 0 auto; width: 700px; height: 400px"></p><ul><li><a href=https://calibreapp.com/docs/metrics/budgets target=_blank>https:://calibreapp.com/docs/metrics/budgets</a></li><li><a href=https://speedcurve.com/blog/tag/performance-budgets/ target=_blank>https:://speedcurve.com/blog/tag/performance-budgets/</a></li></ul></div></section><section slide class=slide><div class=wrap wrap=true><h1>4. Some Tools</h1><ul><li><a href=https://tinyjpg.com/ target=_blank>https:://tinyjpg.com/</a></li><li><a href=http://jpegclub.org/jpegtran/ target=_blank>http:://jpegclub.org/jpegtran/</a></li><li><a href=https://github.com/kud/jpegrescan target=_blank>https:://github.com/kud/jpegrescan</a></li><li><a href=https://github.com/tjko/jpegoptim target=_blank>https:://github.com/tjko/jpegoptim</a></li><li><a href=https://github.com/mozilla/mozjpeg target=_blank>https:://github.com/mozilla/mozjpeg</a></li><li><a href=https://pngquant.org/ target=_blank>https:://pngquant.org/</a></li><li><a href=https://tinypng.com/ target=_blank>https:://tinypng.com/</a></li><li><a href=https://github.com/google/zopfli target=_blank>https:://github.com/google/zopfli</a></li><li><a href=https://github.com/pornel/giflossy target=_blank>https:://github.com/pornel/giflossy</a></li></ul></div></section><section slide class=slide><div class=wrap wrap=true><ul><li><a href=https://github.com/svg/svgo target=_blank>https:://github.com/svg/svgo</a></li><li><a href=http://www.lcdf.org/gifsicle/ target=_blank>http:://www.lcdf.org/gifsicle/</a></li><li><a href=http://jpegclub.org/jpegtran/ target=_blank>http:://jpegclub.org/jpegtran/</a></li><li><a href=http://optipng.sourceforge.net/ target=_blank>http:://optipng.sourceforge.net/</a></li><li><a href=http://pngquant.org/ target=_blank>http:://pngquant.org/</a></li><li><a href=https://webspeedtest.cloudinary.com/ target=_blank>https:://webspeedtest.cloudinary.com/</a></li><li><a href=https://github.com/apache/incubator-pagespeed-ngx target=_blank>https:://github.com/apache/incubator-pagespeed-ngx</a></li><li><a href=https://github.com/imazen/imageflow target=_blank>https:://github.com/imazen/imageflow</a></li><li><a href=https://github.com/thumbor/thumbor target=_blank>https:://github.com/thumbor/thumbor</a></li><li><a href=https://github.com/Klathmon/imagemin-webpack-plugin target=_blank>https:://github.com/Klathmon/imagemin-webpack-plugin</a></li><li><a href=https://github.com/imagemin/imagemin-guetzli target=_blank>https:://github.com/imagemin/imagemin-guetzli</a></li><li><a href=https://developers.google.com/speed/webp/docs/using target=_blank>https:://developers.google.com/speed/webp/docs/using</a></li></ul></div></section><section slide class=slide><div class=wrap wrap=true><h1>5. References</h1><ul><li><a href=https://www.cnblogs.com/buaaxhzh/p/9138307.html target=_blank>https:://www.cnblogs.com/buaaxhzh/p/9138307.html</a></li><li><a href=https://segmentfault.com/q/1010000000510683 target=_blank>https:://segmentfault.com/q/1010000000510683</a></li><li><a href=https://medium.freecodecamp.org/how-jpg-works-a4dbd2316f35 target=_blank>https:://medium.freecodecamp.org/how-jpg-works-a4dbd2316f35</a></li><li><a href="https://www.youtube.com/watch?v=Q2aEzeMDHMA" target=_blank>https:://www.youtube.com/watch?v=Q2aEzeMDHMA</a></li><li><a href=http://dev.gameres.com/Program/Visual/Other/PNGFormat.htm target=_blank>http:://dev.gameres.com/Program/Visual/Other/PNGFormat.htm</a></li><li><a href=https://www.jianshu.com/p/5ad19825a3d0 target=_blank>https:://www.jianshu.com/p/5ad19825a3d0</a></li><li><a href=https://medium.com/@duhroach/how-png-works-f1174e3cc7b7 target=_blank>https:://medium.com/@duhroach/how-png-works-f1174e3cc7b7</a></li><li><a href=https://blog.csdn.net/wzy198852/article/details/17266507 target=_blank>https:://blog.csdn.net/wzy198852/article/details/17266507</a></li><li><a href=https://www.jianshu.com/p/d4db7e0e028a target=_blank>https:://www.jianshu.com/p/d4db7e0e028a</a></li><li><a href=https://blog.csdn.net/Swallow_he/article/details/76165202 target=_blank>https:://blog.csdn.net/Swallow_he/article/details/76165202</a></li><li><a href=https://cloud.tencent.com/developer/article/1155421 target=_blank>https:://cloud.tencent.com/developer/article/1155421</a></li><li><a href=https://developers.google.com/speed/webp/ target=_blank>https:://developers.google.com/speed/webp/</a></li></ul></div></section><section slide class=slide><div class=wrap wrap=true><ul><li><a href=https://medium.com/@duhroach/how-webp-works-lossly-mode-33bd2b1d0670 target=_blank>https:://medium.com/@duhroach/how-webp-works-lossly-mode-33bd2b1d0670</a></li><li><a href=https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/image-optimization target=_blank>https:://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/image-optimization</a></li><li><a href=https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/automating-image-optimization/ target=_blank>https:://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/automating-image-optimization/</a></li><li><a href=https://developers.google.com/web/updates/2015/09/automating-resource-selection-with-client-hints target=_blank>https:://developers.google.com/web/updates/2015/09/automating-resource-selection-with-client-hints</a></li><li><a href=https://www.smashingmagazine.com/2016/01/leaner-responsive-images-client-hints/ target=_blank>https:://www.smashingmagazine.com/2016/01/leaner-responsive-images-client-hints/</a></li><li><a href=https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/save-data/ target=_blank>https:://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/save-data/</a></li><li><a href=https://developers.google.com/web/fundamentals/design-and-ux/responsive/images target=_blank>https:://developers.google.com/web/fundamentals/design-and-ux/responsive/images</a></li><li><a href=https://github.com/igrigorik/webp-detect target=_blank>https:://github.com/igrigorik/webp-detect</a></li><li><a href=https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/replace-animated-gifs-with-video/ target=_blank>https:://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/replace-animated-gifs-with-video/</a></li><li><a href=https://www.slideshare.net/PSJamwal10/image-compression-28886922 target=_blank>https:://www.slideshare.net/PSJamwal10/image-compression-28886922</a></li><li><a href=http://shop.oreilly.com/product/0636920052036.do target=_blank>http:://shop.oreilly.com/product/0636920052036.do</a></li></ul></div></section><section slide class=slide><div class=wrap wrap=true><h1>6. Thanks &amp; FAQ</h1></div></section></article></div><script>window.pluginsOptions = {}



document.addEventListener('DOMContentLoaded', () => {
    const ws = new WebSlides({
        loop: false
    })
    window.wsInstance = ws;
}, false)</script><script src=./js/chunk-vendors.453be508.js></script><script src=./js/README.df33b1f4.js></script></body></html>